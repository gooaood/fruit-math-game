<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÄ‡∏Å‡∏°‡∏ô‡∏±‡∏ö‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÅ‡∏™‡∏ô‡∏™‡∏ô‡∏∏‡∏Å</title>

<style>
body {
  font-family: 'Comic Sans MS', cursive;
  text-align: center;
  background: linear-gradient(to bottom right, #ffd6f6, #cceeff);
  margin: 0;
  padding: 20px;
}

h1 {
  color: #ff4da6;
}

.game-box {
  background: white;
  border-radius: 25px;
  padding: 25px;
  max-width: 550px;
  margin: auto;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}

.fruits {
  font-size: 45px;
  margin: 25px 0;
}

.buttons button {
  background-color: #66ccff;
  border: none;
  padding: 15px 25px;
  margin: 10px;
  border-radius: 20px;
  font-size: 22px;
  cursor: pointer;
  transition: 0.2s;
}

.buttons button:hover {
  background-color: #ff99cc;
  transform: scale(1.1);
}

.mode-btn {
  background-color: #ff99cc;
  margin-bottom: 15px;
  padding: 10px 20px;
  border-radius: 15px;
  border: none;
  font-size: 16px;
  cursor: pointer;
}

.score {
  font-size: 18px;
  margin-top: 10px;
}

/* Modal */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  background: rgba(0,0,0,0.4);
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: white;
  padding: 30px;
  border-radius: 25px;
  text-align: center;
  animation: pop 0.3s ease;
}

@keyframes pop {
  from { transform: scale(0.7); }
  to { transform: scale(1); }
}

.modal button {
  margin-top: 15px;
  padding: 10px 20px;
  border-radius: 15px;
  border: none;
  background: #ff99cc;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>üçì ‡πÄ‡∏Å‡∏°‡∏ô‡∏±‡∏ö‡∏ú‡∏•‡πÑ‡∏°‡πâ üçé</h1>

<div class="game-box">
  <button class="mode-btn" onclick="toggleMode()">‡πÇ‡∏´‡∏°‡∏î: <span id="modeText">‡∏ö‡∏ß‡∏Å</span></button>
  
  <div id="question"></div>
  <div class="fruits" id="fruitDisplay"></div>
  <div class="buttons" id="answers"></div>
  <div class="score">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score">0</span></div>
</div>

<!-- Modal -->
<div class="modal" id="resultModal">
  <div class="modal-content">
    <h2 id="modalText"></h2>
    <button onclick="closeModal()">‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πà‡∏≠</button>
  </div>
</div>

<!-- Sounds -->
<audio id="correctSound" src="https://assets.mixkit.co/sfx/preview/mixkit-kids-cheering-626.mp3"></audio>
<audio id="wrongSound" src="https://assets.mixkit.co/sfx/preview/mixkit-cartoon-voice-bad-887.mp3"></audio>
<audio id="bgMusic" src="https://assets.mixkit.co/music/preview/mixkit-happy-kids-music-1122.mp3" loop></audio>

<script>
const fruits = ["üçé","üçå","üçá","üçä","üçì","üçâ"];
let score = 0;
let mode = "add";
let correctAnswer = 0;

const bgMusic = document.getElementById("bgMusic");
bgMusic.volume = 0.3;
bgMusic.play().catch(()=>{});

function toggleMode() {
  mode = mode === "add" ? "subtract" : "add";
  document.getElementById("modeText").innerText = mode === "add" ? "‡∏ö‡∏ß‡∏Å" : "‡∏•‡∏ö";
  generateQuestion();
}

function generateQuestion() {
  const fruitA = fruits[Math.floor(Math.random()*fruits.length)];
  let fruitB;
  do {
    fruitB = fruits[Math.floor(Math.random()*fruits.length)];
  } while(fruitB === fruitA);

  const num1 = Math.floor(Math.random()*5) + 1;
  const num2 = Math.floor(Math.random()*5) + 1;

  if(mode === "add") {
    correctAnswer = num1 + num2;
    document.getElementById("question").innerText = "‡∏ô‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?";
    document.getElementById("fruitDisplay").innerText =
      `${fruitA.repeat(num1)} + ${fruitB.repeat(num2)}`;
  } else {
    const max = Math.max(num1, num2);
    const min = Math.min(num1, num2);
    correctAnswer = max - min;
    document.getElementById("question").innerText = "‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Å‡∏µ‡πà‡∏•‡∏π‡∏Å?";
    document.getElementById("fruitDisplay").innerText =
      `${fruitA.repeat(max)} - ${fruitA.repeat(min)}`;
  }

  generateAnswers();
}

function generateAnswers() {
  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";

  let options = new Set();
  options.add(correctAnswer);
  while(options.size < 3){
    options.add(Math.floor(Math.random()*10));
  }

  options = Array.from(options).sort(() => Math.random()-0.5);

  options.forEach(option => {
    const btn = document.createElement("button");
    btn.innerText = option;
    btn.onclick = () => checkAnswer(option);
    answersDiv.appendChild(btn);
  });
}

function checkAnswer(selected) {
  const modal = document.getElementById("resultModal");
  const modalText = document.getElementById("modalText");

  if(selected === correctAnswer) {
    score++;
    modalText.innerText = "üéâ Good Job! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢!";
    document.getElementById("correctSound").play();
  } else {
    modalText.innerText = "üò¢ Oops! ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞!";
    document.getElementById("wrongSound").play();
  }

  document.getElementById("score").innerText = score;
  modal.style.display = "flex";
}

function closeModal() {
  document.getElementById("resultModal").style.display = "none";
  generateQuestion();
}

generateQuestion();
</script>

</body>
</html>
